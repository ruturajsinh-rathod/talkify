{% extends 'base.html' %}
{% load humanize %}

{% block content %}
<h4>Chat with {{ target_user.username }}</h4>

<div class="border rounded p-3 mb-3" style="max-height: 400px; overflow-y: auto;">
  {% for msg in messages %}
    <div class="mb-2">
      <strong class="{% if msg.sender == user %}text-primary{% endif %}">
        {{ msg.sender.username }}:
      </strong>
      {{ msg.text }}
      <br><small class="text-muted">{{ msg.timestamp|naturaltime }}</small>
    </div>
  {% empty %}
    <p class="text-muted">No messages yet.</p>
  {% endfor %}
</div>

<form method="post">
  {% csrf_token %}
  <div class="input-group">
    <input type="text" name="message" class="form-control" placeholder="Type your message..." required>
    <button class="btn btn-primary" type="submit">Send</button>
  </div>
</form>
{% endblock %}
